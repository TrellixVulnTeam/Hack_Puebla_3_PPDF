<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>No</title>
        <link rel="stylesheet" href="../static/main.css">
  </head>
  <body>
    <div id="audio-spectrum"></div>
    <input type="buttons" id="btn-play" value="Play" disabled="disabled">
    <input type="buttons" id="btn-pause" value="Pause" disabled="disabled">
    <input type="buttons" id="btn-stop" value="Stop" disabled="disabled">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/wavesurfer.js/1.3.7/wavesurfer.min.js"></script>

    <script type="text/javascript">
      var buttons = {
        play: document.getElementById('btn-play'),
        pause: document.getElementById('btn-pause'),
        stop: document.getElementById('btn-stop')
      };

      var Spectrum = WaveSurfer.create({
        container: '#audio-spectrum',
        progressColor: "#03a9f4"
      });

      buttons.play.addEventListener("click", function(){
        Spectrum.play();
        buttons.stop.disabled = false;
        buttons.pause.disabled = false;
        buttons.play.disabled = true;
      }, false);

      buttons.pause.addEventListener("click", function(){
        Spectrum.pause();
        buttons.pause.disabled = true;
        buttons.play.disabled = false;
      }, false);

      buttons.stop.addEventListener("click", function(){
        Spectrum.stop();

        buttons.stop.disabled = true;
        buttons.pause.disabled = false;
        buttons.play.disabled = false;
      }, false);

      Spectrum.on('ready', function(){
        buttons.play.disabled = false;
      });

      window.addEventListener("resize", function(){
        var currentProgress = Spectrum.getCurrentTime() / Spectrum.getDuration();

        Spectrum.empty();
        Spectrum.drawBuffer();
        Spectrum.seekTo(currentProgress);

        buttons.stop.disabled = false;
        buttons.pause.disabled = true;
        buttons.play.disabled = false;


      },false);

      Spectrum.load('https://ia902606.us.archive.org/35/items/shortpoetry_047_librivox/song_cjrg_teasdale_64kb.mp3');
    </script>
  </body>
</html>
